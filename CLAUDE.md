# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This project is a web application that displays the Claude Code changelog. It fetches version information from the npm registry, retrieves and parses the CHANGELOG.md from GitHub, and generates an RSS feed.

## Tech Stack

- **Frontend**: React 19 + TypeScript + Vite
- **Styling**: Tailwind CSS 4
- **Build Tools**: Vite 7, TypeScript 5
- **Package Manager**: Bun (used in CI/CD)
- **React Compiler**: Enabled (babel-plugin-react-compiler)

## Core Architecture

### Data Flow

1. **Data Fetching Pipeline** (`scripts/` directory):
   - `fetch-versions.ts`: Fetches version information for `@anthropic-ai/claude-code` from npm registry and saves to `data/versions.json`
   - `fetch-changelog.ts`: Fetches CHANGELOG.md via GitHub API, parses it, and splits into versioned entries saved to `data/changelog.json`
   - `build-feed.ts`: Generates Atom feed (feed.xml) from `data/changelog.json` and saves to `public/`

2. **Frontend** (`src/` directory):
   - `App.tsx`: Main component that imports `data/changelog.json` and displays changelog entries
   - `components/ChangelogItem.tsx`: Displays individual version changelog entries
   - `components/CopyButton.tsx`: Provides copy functionality for RSS feed URL
   - `components/Layout.tsx`: Layout wrapper component

### Data Files

- `data/versions.json`: Mapping of version numbers to published dates
- `data/changelog.json`: Parsed changelog entries (version, content, publishedAt)

## Development Commands

```bash
# Start development server
bun run dev

# Build (type check + Vite build)
bun run build

# Type check only
bun run type-check

# Format code
bun run fmt

# Lint
bun run lint

# Preview (after build)
bun run preview
```

## Data Update Commands

```bash
# Fetch version information
bun run fetch:versions

# Fetch changelog (requires GITHUB_TOKEN environment variable)
bun run fetch:changelog

# Generate RSS feed
bun run build:feed
```

These commands run automatically every hour via GitHub Actions (.github/workflows/update.yml).

## Important Notes

- **GitHub Token**: The `fetch:changelog` script requires a `GITHUB_TOKEN` environment variable to access the GitHub API
- **vite-node**: Scripts use `vite-node` to execute TypeScript directly
- **Git Hooks**: Husky + lint-staged are configured to automatically run Prettier before commits
- **React Compiler**: React Compiler is enabled, which impacts dev and build performance
- **Data Files**: `data/changelog.json` and `data/versions.json` are auto-generated by scripts - avoid manual editing

## CI/CD

GitHub Actions workflow defined in `.github/workflows/update.yml`:

- Runs hourly (cron: "0 \* \* \* \*")
- Manual trigger available (workflow_dispatch)
- Uses Bun to install dependencies and run data update scripts
- Automatically commits and pushes changes if any exist
